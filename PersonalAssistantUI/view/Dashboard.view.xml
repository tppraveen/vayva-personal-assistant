<mvc:View
    controllerName="PersonalAssistantUI.controller.Dashboard"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:f="sap.f"
	xmlns:generic="sap.m"
	xmlns:mc="sap.suite.ui.microchart"
	xmlns:smc="sap.ui.comp.smartmicrochart"
	xmlns="sap.m"
	xmlns:m="sap.m"
	xmlns:core="sap.ui.core"
		xmlns:l="sap.ui.layout"

	xmlns:viz="sap.viz.ui5.controls"
	xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
	xmlns:viz.data="sap.viz.ui5.data"
 >
	<Page showHeader="false"  >
		<content>
			<!-- <VBox width="100%" fitContainer="true"> -->
			<!-- Collapsible Panel -->
			<Panel
				expandable="false"
				expanded="false"
				class="  sapUiSmallMarginBottom newsPanel">
				<!-- Show/Hide Button -->
				<!-- Custom "Header" with Title left and Button right -->
				<HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMargin">
					<!-- Left title -->
					<VBox>
						<Title text="{i18n>WELCOME_TEXT} {oGlobalAIModel>/applicationDetails/applicationName}" level="H3" />
						<Label text="{i18n>OVERVIEW_UPDATES}"  />
					</VBox>
					<!-- Right show/hide button -->
					<Button   press="onToggleCarousel"
					text="{= !${oGlobalAIModel>/DashboardPage/FeedsCarouselToogle} ? 'show' : 'hide' }" 
					icon="{= !${oGlobalAIModel>/DashboardPage/FeedsCarouselToogle} ? 'sap-icon://show' : 'sap-icon://hide' }" />
				</HBox>
				
					<!-- Carousel for Hot News / Featured tiles -->
				 <VBox id="idDashboardCarousel2"  >
						<Carousel visible="false"
							id="idDashboardCarousel" 
							showPageIndicator="true"    width="100%"
							loop="true"
							pageChanged=".onCarouselPageChanged"
							  pages="{
        path: 'oGlobalAIModel>/DashboardPage/Tiles'
    }" >
							<pages>
								<VBox renderType="Bare">
            <Image
                src="{oGlobalAIModel>image}"
                width="100%"
                height="100%" />
            <Text
                text="{oGlobalAIModel>text}"
                class="welcomeCarouselText" />
        </VBox>
							</pages>
						</Carousel>
					 </VBox>

				<HBox  justifyContent="SpaceBetween" alignItems="Center" width="95%" visible="{oGlobalAIModel>/DashboardPage/FeedsCarouselToogle}">
			 
	<GenericTile   
	class="    tileLayout customTile3D " header="{i18n>DAILY_ROUTINE_TILE}" subheader="â° {oGlobalAIModel>/DashboardPage/OverViewTiles/dailyRoutine/lastEntryDateTime}" press="press">
		
		<TileContent >
			<ImageContent src="sap-icon://customer-history" />
		</TileContent>
	</GenericTile>
	<GenericTile visible="{=! ${device>/system/phone}}"
	 class="sapUiTinyMarginBegin   tileLayout customTile3D " header="{i18n>ADD_EXPENSE_TILE}"
				 subheader="{i18n>ADD_EXPENSE_SUBHEADER_TILE}" press="onPress"  >
		<TileContent unit="{i18n>CURRENCY}" >
			<NumericContent value="{oGlobalAIModel>/DashboardPage/OverViewTiles/Expense/totalExpense}" withMargin="false" />
		</TileContent>
	</GenericTile>
	<GenericTile  visible="{=! ${device>/system/phone}}"
	 class="sapUiTinyMarginBegin   tileLayout customTile3D " header="{i18n>LOG_MOOD_TILE}"
				 subheader="{i18n>LOG_MOOD_SUBHEADER_TILE}" press="onPress"  >
		<TileContent unit="Habit tracker"  >
			<ImageContent src="sap-icon://heart" />
		</TileContent>
	</GenericTile>
	<GenericTile visible="{=! ${device>/system/phone}}"
	 class="sapUiTinyMarginBegin   tileLayout customTile3D " header="{i18n>ADD_APPOINTMENT_TILE}"
				 subheader="{i18n>ADD_APPOINTMENT_SUBHEADER_TILE}" press="onPress"  >
		<TileContent unit="{i18n>ADD_APPOINTMENT_FOOTER_TILE}">
			<ImageContent src="sap-icon://appointment-2" />
		</TileContent>
	</GenericTile>
		 
	 

 

 
	  	<HBox visible="{= ${device>/system/phone}}" justifyContent="Center" class="customRow" wrap="Wrap" alignItems="SpaceBetween" >
				<Button text="Log Mood" icon="sap-icon://heart" press=".onLogMood"  class="sapUiSmallMarginBegin"/>
				<Button text="Add Expense" icon="sap-icon://add" press=".onAddExpense" />
				<Button text="Add Appointment" icon="sap-icon://appointment-2" press=".onAddAppointment"  class="sapUiSmallMarginBegin" />
				<Button text="Upcoming Reminder" icon="sap-icon://bell" press=".onShowReminders"  class="sapUiSmallMarginBegin"/>
			</HBox>
				</HBox>
			
  
			</Panel>
			<!-- </VBox>  -->
			<!-- MAIN FLEX CONTAINER -->
			<m:FlexBox
    direction="{= ${device>/system/phone} ? 'Column' : 'Row' }"
    width="100%"
    height="100%"
    fitContainer="true">
				<!-- LEFT SIDE (Desktop) or Top (Mobile) -->
				<m:FlexBox
      direction="Column"
      width="{= ${device>/system/phone} ? '100%' : '65%'}"
      justifyContent="Start"
      alignItems="Stretch"
      class="sapUiSmallMargin">
					<!-- Health + Overview (side-by-side on desktop, stacked on mobile) -->
					<m:FlexBox
        direction="{= ${device>/system/phone} ? 'Row' : 'Row' }"
        justifyContent="SpaceBetween"
        width="100%">
						<HBox width="{= ${device>/system/phone} ? '50%' : '50%'}">
							<VBox  justifyContent="Center" alignItems="Center">
								<Label text="Health Status"/>
								<mc:ComparisonMicroChart scale="M" shrinkable="true" class="sapUiSmallMargin" press="press" width="100%"
						 maxValue="{oGlobalAIModel>/DashboardPage/healthStatusData/maxValue}" 
						 minValue="{oGlobalAIModel>/DashboardPage/healthStatusData/maxValue}">
									<mc:data  >
										<mc:ComparisonMicroChartData 
									title="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/0/title}" 
									value="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/0/value}" 
									color="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/0/color}" 
									displayValue="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/0/displayValue}" />
										<mc:ComparisonMicroChartData 
									title="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/1/title}" 
									value="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/1/value}" 
									color="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/1/color}" 
									displayValue="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/1/displayValue}" />
										<mc:ComparisonMicroChartData 
									title="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/2/title}" 
									value="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/2/value}" 
									color="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/2/color}" 
									displayValue="{oGlobalAIModel>/DashboardPage/healthStatusData/lists/2/displayValue}" />
									</mc:data>
								</mc:ComparisonMicroChart>
							</VBox>
						</HBox>
						<HBox width="{= ${device>/system/phone} ? '50%' : '50%'}">
							<VBox justifyContent="Center" alignItems="Center">
								<Label text="Monthly Overview"/>
								<mc:ColumnMicroChart press="press" class="sapUiSmallMargin" allowColumnLabels="true">
									<!-- Binding columns -->
									<mc:columns>
										<mc:ColumnMicroChartData 
            value="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/0/value}" 
            label="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/0/label}" 
            displayValue="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/0/displayValue}" 
            color="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/0/color}" />
										<mc:ColumnMicroChartData 
            value="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/1/value}" 
            label="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/1/label}" 
            displayValue="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/1/displayValue}" 
            color="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/1/color}" />
										<mc:ColumnMicroChartData 
            value="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/2/value}" 
            label="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/2/label}" 
            displayValue="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/2/displayValue}" 
            color="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/2/color}" />
										<mc:ColumnMicroChartData 
            value="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/3/value}" 
            label="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/3/label}" 
            displayValue="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/3/displayValue}" 
            color="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/3/color}" />
										<mc:ColumnMicroChartData 
            value="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/4/value}" 
            label="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/4/label}" 
            displayValue="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/4/displayValue}" 
            color="{oGlobalAIModel>/DashboardPage/WeeklyExpenseChartData/4/color}" />
									</mc:columns>
								</mc:ColumnMicroChart>
							</VBox>
						</HBox>
					</m:FlexBox>
					<!-- Chart below visible="{= ${device>/system/desktop}}"-->
					<HBox width="100%" >
						<VBox width="100%"   >
							<Label text="Spend Overview"/>
							<viz:VizFrame width="95%"  
								id="idColumnChart"
								vizType="column"
								vizProperties='{
									"title": {
											"visible": false
										},
										"legend": { "visible": false },
										"layout": { "padding": { "bottom": 80 } },   
										"categoryAxis": {
											"label": {
												"rotation": 45,       
												"showAsWrapped": false,
												"visible": true
											}
										},
										"valueAxis": {
											"title": { "visible": false }
										}
									}'
								 
								dataset="{oMonthlyExpenseChartData>/values}">
								<!-- Dataset -->
								<viz:dataset>
									<viz.data:FlattenedDataset data="{oMonthlyExpenseChartData>/values}">
										<viz.data:dimensions>
											<viz.data:DimensionDefinition name="Week" value="{oMonthlyExpenseChartData>Week}"/>
										</viz.data:dimensions>
										<viz.data:measures>
											<viz.data:MeasureDefinition name="Income" value="{oMonthlyExpenseChartData>Income}"/>
											<viz.data:MeasureDefinition name="Expense" value="{oMonthlyExpenseChartData>Expense}"/>
										</viz.data:measures>
									</viz.data:FlattenedDataset>
								</viz:dataset>
								<!-- Feeds -->
								<viz:feeds>
									<viz.feeds:FeedItem uid="valueAxis" type="Measure" values="Income,Expense"/>
									<viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="Week"/>
								</viz:feeds>
							</viz:VizFrame>
						</VBox>
					</HBox>
				</m:FlexBox>
				<!-- RIGHT SIDE (Desktop only) -->
				<HBox 
      width="{= ${device>/system/phone} ? '100%' : '45%'}"
      class=" ">
					<VBox width="100%" class="sapUiNoContentPadding  "  >
						<!-- <HBox width="100%" fitContainer="true"> -->
						<Label text="Recurring/Remianders " alignItems="Center"/>
						<NotificationList width="100%"
              id="idNotificationList"
              items="{
                  path: 'oUpcomingRemindersData>/reminders'
              }"
              showUnreadStatus="true">
							<NotificationListItem
                  title="{oUpcomingRemindersData>title}"
                  description="{oUpcomingRemindersData>description}"
                  datetime="{oUpcomingRemindersData>datetime}"
                  unread="{oUpcomingRemindersData>unread}"
                  priority="{oUpcomingRemindersData>priority}"
                  authorName="{oUpcomingRemindersData>authorName}"
                  authorPicture="{oUpcomingRemindersData>authorPicture}"
                  showCloseButton="true"
                  press=".onNotificationPress">
								<buttons>
									<Button
                          icon="sap-icon://accept"
                          text="Complete"
                          press=".onCompletePress"/>
									<Button
                          icon="sap-icon://sys-cancel"
                          text="Ignore"
                          press=".onIgnorePress"/>
									<Button
                          icon="sap-icon://schedule"
                          text="Reschedule"
                          press=".onReschedulePress"/>
								</buttons>
							</NotificationListItem>
						</NotificationList>
						<!-- </HBox> -->
					</VBox>
				</HBox>
			</m:FlexBox>
			<!-- </VBox> -->

		</content>
		
			
			 
	</Page>
</mvc:View>
  